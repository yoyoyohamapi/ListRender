!function(a){a.fn.renderList=function(b){var c={element:this,tpl:"",data_url:"",list_container:"",custom_render:function(){}},d=a.extend(c,b),e=Backbone.Model.extend({}),f=Backbone.Collection.extend({model:e,url:d.data_url}),g=Backbone.View.extend({tagName:"li",photoItemTemplate:_.template(a(d.tpl).html()),render:function(){return this.$el.html(this.photoItemTemplate(this.model.toJSON())),this}}),h=Backbone.View.extend({el:a(d.element),initialize:function(){this.list=new f,this.list.bind("reset",this.addAll,this),this.list.bind("all",this.render,this),this.list.fetch({silent:!0,success:function(a,b){null!=b?a.reset(b):h.render()}})},render:function(){d.custom_render()},addOne:function(a){var b=new g({model:a});this.$(d.list_container).append(b.render().el)},addAll:function(){this.list.each(this.addOne)}});return new h}}(jQuery);